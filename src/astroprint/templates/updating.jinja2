{% extends 'base.jinja2' %}

{% block css %}
	{% assets filters="scss", output="css/gen/updating.css", 
		"css/scss/updating.scss" %}
		<link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}" />
	{% endassets %}
{% endblock %}

{% block content %}
<div id="updating-view" class="row">
	<div class="small-12 columns progress">
		<h1 class="bold" align="center">Software Update in Progress</h1>
		<h3 align="center" class="message">Downloading release...</h3>
		<center>
			<div class="progress-animation">
				<img class="progress-img" src="/img/progress-animation-4.5.gif"/>
				<img class="left-img" src="/img/globe.png"/>
				<img class="right-img" src="/img/astrobox.png"/>
			</div>
		</center>
	</div>
	<div class="small-12 medium-11 medium-centered large-8 large-centered columns error hide">
		<h1 class="bold" align="center">System Update Failed</h1>
		<p>
			<i class="icon-attention"></i> An error occured and your Astrobox was unable to 
			complete the update.
		</p>
		<button class="expand radius success bold">Close</button>
	</div>
</div>
{% endblock %}

{% block js %}
	<script type="text/javascript">
		var UI_API_KEY = "{{ uiApiKey }}";
		var BASEURL = "{{ url_for('index') }}";
		var API_BASEURL = BASEURL + "api/";
		var SOCKJS_URI = window.location.protocol.slice(0, -1) + "://" + (window.document ? window.document.domain : window.location.hostname) + ":" + window.location.port + "/sockjs";
	</script>
	{% assets filters="closure_js", output="js/gen/updating.js", 
		"js/lib/jquery.js", "js/lib/underscore.js", "js/lib/backbone.js", "js/lib/sockjs.js", "js/lib/fastclick.js", "js/updating/updating.js" -%}
			<script type="text/javascript" src="{{ ASSET_URL }}"></script>
	{%- endassets %}
	<script type="text/javascript">
	</script>
{% endblock %}